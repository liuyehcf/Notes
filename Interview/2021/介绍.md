你好，我叫贺辰枫，本硕毕业于北京邮电大学，通信工程专业。硕士毕业后，入职阿里巴巴iot事业部边缘计算团队

下面介绍一下我这边的项目

首先，第一个是隧道服务，在iot的场景中，设备、网关、边缘服务器通常处于一个私网环境中，无公网ip，借助隧道服务，我们可以在iot的物联网控制台上，通过web-terminal，这个web-terminal就是类似于ssh的桌面程序，包含文件管理和命令行终端。此外，我们还能将边缘侧的本地控制台，比如我们这边一方的边缘控制台、路由器的控制台、摄像头的控制台等等一系列控制台，通过一个临时域名，暴露到公网当中，任何人只要在浏览器中访问这个临时域名，就能够访问到目标的边缘控制台。此外，隧道服务还作为开放平台的网络基础设施，提供从云端调用边缘端http-api的基础能力。整体架构，简单来说，包含三部分，用户侧、服务端、设备侧，设备侧主动与云端保持一个websocket长连接，一个长连接可以支撑多个不同的会话，也就是允许多人同时访问某个设备的相同或者不同的服务。理论上，可以代理任何应用层协议，我们针对特定协议（ssh、http）做了封装，只要就是降低用户使用门槛，否则用户就得在自己的电脑上装一个agent才能正常使用隧道

第二个是规则中台，规则中台主要支撑了3块业务，设备联动、告警、消息转发。所谓设备联动，举个简单的例子，你家里有两个设备，一个是温度传感器，一个是空调，温度传感器上报温度，当温度大于30摄氏度时，下发指令打开空调，等等类似这样的设备联动场景。第二块是告警，比如设备上下线、cpu、内存、磁盘等等维度的告警规则。第三块是消息转发，这个只要是部门内部的稳定性治理方案，原先整个平台都要接受设备中心的全量消息，量级大约在700wQPM，而各个上层的系统关注的消息可能只是其中的一小部分，所以就通过规则中心来进行一个流量的过滤。我的工作主要就是提供了一个流程编排框架。在提供这套框架之前，由于一些历史原因，有3个不同的规则描述形式，每个不同的描述形式背后都有一套执行逻辑，难以维护，我这套框架主要是替换了之前的3个运行时，提供一个统一、稳定、高效的、功能相对更强大的flow引擎。flow引擎从功能上来讲就分为两大块，flow定义、以及flow执行引擎。定义部分，我基于自研的编译框架，开发出了一套flow描述语言，可以通过一些语法，比如if then、if else then、join、join then、select、sub等等来表示各个之间的关联关系。然后flow执行引擎是事件驱动的，特点就是全异步，无阻塞。此外还提供了一个表达式执行框架，这个也是基于我自研的编译框架开发的，支持字面值、23种java运算符、函数定义，包括定参，不定参，支持重载运算符，比如你可以定义整数和一个普通java对象的加法操作

第三块是边缘一体机，它基于云原生技术，提供了一体机、边缘应用的全生命周期服务，包括应用管理、设备接入管理、远程运维、一体机管理等能力。场景包括，物业一体机（人行、车型），路边停车，vlog等等业务。我在这个项目中，主要负责一体机安装包构建平台，主要将一方、二方的应用、底座二进制软件、操作系统、结合硬件信息打包成一个系统安装包，形式可以是.iso文件或者rootfs。另外还负责一体机的一键扫码激活、注销、运维等生命周期管理。第三块是输出了一个一键诊断工具，提供包括主机网络、容器网络、软件运行状态等多维度的诊断功能。这个项目呢，说实话，工程性、运维的工作偏多，但是收获还是蛮多的，包括如何构建一个自定义发行版的操作系统，系统安装流程，产线安装流程，然后在后续支持的过程中也排查了很多问题，